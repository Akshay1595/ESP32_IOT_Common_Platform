<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Smart_Solutions_ESP32: C:/Users/aksha/Documents/Akshay/Projects/Smart_solutions/Akshay_data/ESP32/NewCode__Pub_sub/pub_sub/pub_sub.ino File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Smart_Solutions_ESP32
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   <div id="projectbrief">ESP32 based Common IOT platform</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_2673f7cb4cefbb9d517762b3b0095ce9.html">pub_sub</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">pub_sub.ino File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This is the main file where code starts execution. This project is working on ESP32 code compiled on Arduino IDE platform. ESP32 is used to collect and send data to cloud. Cloud server will collect the data and take a decision based on computing logic.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="my__header_8h_source.html">my_header.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:afe461d27b9c48d5921c00d521181f12f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pub__sub_8ino.html#afe461d27b9c48d5921c00d521181f12f">loop</a> ()</td></tr>
<tr class="separator:afe461d27b9c48d5921c00d521181f12f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dfd9b79bc5a37d7df40207afbc5431f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pub__sub_8ino.html#a7dfd9b79bc5a37d7df40207afbc5431f">setup</a> (void)</td></tr>
<tr class="separator:a7dfd9b79bc5a37d7df40207afbc5431f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:af84653dce235192aa663ea49a651271b"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pub__sub_8ino.html#af84653dce235192aa663ea49a651271b">lastMsg</a> = 0</td></tr>
<tr class="separator:af84653dce235192aa663ea49a651271b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0994d3d44eaf32f76d3a731f458b8da2"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pub__sub_8ino.html#a0994d3d44eaf32f76d3a731f458b8da2">payload</a> [64]</td></tr>
<tr class="separator:a0994d3d44eaf32f76d3a731f458b8da2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This is the main file where code starts execution. This project is working on ESP32 code compiled on Arduino IDE platform. ESP32 is used to collect and send data to cloud. Cloud server will collect the data and take a decision based on computing logic. </p>
<hr  />
<dl class="section author"><dt>Author</dt><dd>Akshay Godase </dd></dl>
<dl class="section date"><dt>Date</dt><dd>22-09-2020 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="afe461d27b9c48d5921c00d521181f12f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe461d27b9c48d5921c00d521181f12f">&#9670;&nbsp;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<hr  />
<p> This is the loop function which will loop continuously </p>
<div class="fragment"><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;            { </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="comment">// Step 1: check if client is connected</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="aws_8cpp.html#acf0e2d6abfa54ef5a02614497a122757">aws_check_if_connected</a>();</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordtype">long</span> now = millis();</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="comment">// This condition will check if loop is not idle from 2 seconds</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordflow">if</span> (now - <a class="code" href="pub__sub_8ino.html#af84653dce235192aa663ea49a651271b">lastMsg</a> &gt; 2000) {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <a class="code" href="pub__sub_8ino.html#af84653dce235192aa663ea49a651271b">lastMsg</a> = now;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <a class="code" href="adc_8cpp.html#ac82c69d072e770fc40e81fc9c53857c1">adc_read_and_msg</a>(<a class="code" href="pub__sub_8ino.html#a0994d3d44eaf32f76d3a731f458b8da2">payload</a>);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        Serial.print(<span class="stringliteral">&quot;Publish message: &quot;</span>);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        Serial.println(<a class="code" href="pub__sub_8ino.html#a0994d3d44eaf32f76d3a731f458b8da2">payload</a>);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <span class="comment">// Step 2: publish the message</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <a class="code" href="aws_8cpp.html#acda02faadbba59fcacff34f62dd36282">aws_publish</a>(<a class="code" href="pub__sub_8ino.html#a0994d3d44eaf32f76d3a731f458b8da2">payload</a>);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    }              </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    delay(1000); <span class="comment">// wait for a second</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="comment">// Step 3: Toggle the LED for indication to end user</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="led_8cpp.html#a003d0709ca32748a854f13ffaf661946">led_toggle_status_pin</a>();</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7dfd9b79bc5a37d7df40207afbc5431f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dfd9b79bc5a37d7df40207afbc5431f">&#9670;&nbsp;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is the setup function where all initializations are done </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">none</td><td></td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;                 {</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    Serial.setDebugOutput(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    Serial.begin(115200);</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <a class="code" href="cmd_8cpp.html#a26ee2469586d27bea5fd2d962f6a626b">cmd_ble_init</a>();</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <a class="code" href="led_8cpp.html#a45a4dce2a793aa9be79132acc6527869">led_setup</a>();</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <a class="code" href="wifi_8cpp.html#a7267cf9f0ba503d904709977c18a07ea">wifi_init</a>();</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    delay(1000);</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <a class="code" href="aws_8cpp.html#af93d078d69a1aec27b696444fdf146e1">aws_init</a>();</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    Serial.println(<span class="stringliteral">&quot;All Setup Done!\n&quot;</span>);</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="af84653dce235192aa663ea49a651271b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af84653dce235192aa663ea49a651271b">&#9670;&nbsp;</a></span>lastMsg</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long lastMsg = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>lastMsg will maintain the time stamp of last message <br  />
 </p>

</div>
</div>
<a id="a0994d3d44eaf32f76d3a731f458b8da2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0994d3d44eaf32f76d3a731f458b8da2">&#9670;&nbsp;</a></span>payload</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char payload[64]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Buffer to maintain the message to be translated to cloud </p>

</div>
</div>
</div><!-- contents -->
<div class="ttc" id="aled_8cpp_html_a45a4dce2a793aa9be79132acc6527869"><div class="ttname"><a href="led_8cpp.html#a45a4dce2a793aa9be79132acc6527869">led_setup</a></div><div class="ttdeci">void led_setup(void)</div><div class="ttdoc">Initialization sequence to configure all LEDs.</div><div class="ttdef"><b>Definition:</b> led.cpp:54</div></div>
<div class="ttc" id="apub__sub_8ino_html_af84653dce235192aa663ea49a651271b"><div class="ttname"><a href="pub__sub_8ino.html#af84653dce235192aa663ea49a651271b">lastMsg</a></div><div class="ttdeci">long lastMsg</div><div class="ttdef"><b>Definition:</b> pub_sub.ino:20</div></div>
<div class="ttc" id="apub__sub_8ino_html_a0994d3d44eaf32f76d3a731f458b8da2"><div class="ttname"><a href="pub__sub_8ino.html#a0994d3d44eaf32f76d3a731f458b8da2">payload</a></div><div class="ttdeci">char payload[64]</div><div class="ttdef"><b>Definition:</b> pub_sub.ino:18</div></div>
<div class="ttc" id="aled_8cpp_html_a003d0709ca32748a854f13ffaf661946"><div class="ttname"><a href="led_8cpp.html#a003d0709ca32748a854f13ffaf661946">led_toggle_status_pin</a></div><div class="ttdeci">void led_toggle_status_pin(void)</div><div class="ttdoc">This interface will toggle status pin. It checks flag status_led and toggles the status LED.</div><div class="ttdef"><b>Definition:</b> led.cpp:20</div></div>
<div class="ttc" id="awifi_8cpp_html_a7267cf9f0ba503d904709977c18a07ea"><div class="ttname"><a href="wifi_8cpp.html#a7267cf9f0ba503d904709977c18a07ea">wifi_init</a></div><div class="ttdeci">void wifi_init(void)</div><div class="ttdoc">This function initialize WIFI connection.</div><div class="ttdef"><b>Definition:</b> wifi.cpp:51</div></div>
<div class="ttc" id="aaws_8cpp_html_acf0e2d6abfa54ef5a02614497a122757"><div class="ttname"><a href="aws_8cpp.html#acf0e2d6abfa54ef5a02614497a122757">aws_check_if_connected</a></div><div class="ttdeci">void aws_check_if_connected(void)</div><div class="ttdoc">Function to ensure if AWS client is connected. If not connected reconnect it.</div><div class="ttdef"><b>Definition:</b> aws.cpp:203</div></div>
<div class="ttc" id="aaws_8cpp_html_af93d078d69a1aec27b696444fdf146e1"><div class="ttname"><a href="aws_8cpp.html#af93d078d69a1aec27b696444fdf146e1">aws_init</a></div><div class="ttdeci">void aws_init(void)</div><div class="ttdoc">Function will initialize all the necessary components for AWS.</div><div class="ttdef"><b>Definition:</b> aws.cpp:213</div></div>
<div class="ttc" id="acmd_8cpp_html_a26ee2469586d27bea5fd2d962f6a626b"><div class="ttname"><a href="cmd_8cpp.html#a26ee2469586d27bea5fd2d962f6a626b">cmd_ble_init</a></div><div class="ttdeci">void cmd_ble_init(void)</div><div class="ttdoc">This interface is for initialization of bluetooth. This interface waits for input from bluetooth devi...</div><div class="ttdef"><b>Definition:</b> cmd.cpp:198</div></div>
<div class="ttc" id="aaws_8cpp_html_acda02faadbba59fcacff34f62dd36282"><div class="ttname"><a href="aws_8cpp.html#acda02faadbba59fcacff34f62dd36282">aws_publish</a></div><div class="ttdeci">void aws_publish(char *payload)</div><div class="ttdoc">Function to publish on AWS cloud configured.</div><div class="ttdef"><b>Definition:</b> aws.cpp:194</div></div>
<div class="ttc" id="aadc_8cpp_html_ac82c69d072e770fc40e81fc9c53857c1"><div class="ttname"><a href="adc_8cpp.html#ac82c69d072e770fc40e81fc9c53857c1">adc_read_and_msg</a></div><div class="ttdeci">void adc_read_and_msg(char *data_payload)</div><div class="ttdoc">This interface will read ADC values and fill the buffer with message consisting these ADC values.</div><div class="ttdef"><b>Definition:</b> adc.cpp:16</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
